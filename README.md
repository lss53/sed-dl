# å›½å®¶ä¸­å°å­¦æ™ºæ…§æ•™è‚²å¹³å°èµ„æºä¸‹è½½å·¥å…· (sed-dl)

<div align="center">

<p align="center">
    <a href="https://github.com/lss53/sed-dl/actions/workflows/release.yml">
        <img src="https://github.com/lss53/sed-dl/actions/workflows/release.yml/badge.svg" alt="æ„å»ºçŠ¶æ€">
    </a>
    <a href="https://github.com/lss53/sed-dl/releases/latest">
        <img src="https://img.shields.io/github/v/release/lss53/sed-dl" alt="æœ€æ–°ç‰ˆæœ¬">
    </a>
    <a href="https://github.com/lss53/sed-dl/releases/latest">
        <img src="https://img.shields.io/github/downloads/lss53/sed-dl/total" alt="ä¸‹è½½æ¬¡æ•°">
    </a>
    <a href="https://opensource.org/licenses/MIT">
        <img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="è®¸å¯è¯: MIT">
    </a>
</p>

**ä¸“ä¸ºå›½å®¶ä¸­å°å­¦æ™ºæ…§æ•™è‚²å¹³å°è®¾è®¡çš„å¼ºå¤§å‘½ä»¤è¡Œä¸‹è½½å·¥å…·ï¼ŒåŸºäº Rust æ„å»º ğŸ¦€ï¼Œç®€å•é«˜æ•ˆï¼Œç¨³å®šå¯é ã€‚**

</div>

---

`sed-dl` æ—¨åœ¨ä¸ºæ•™å¸ˆã€å­¦ç”Ÿå’Œå®¶é•¿æä¾›ä¾¿æ·çš„ç¦»çº¿èµ„æºä¸‹è½½æ–¹æ¡ˆï¼Œæ”¯æŒè¯¾ç¨‹è§†é¢‘ã€ç”µå­æ•™æåŠé…å¥—éŸ³é¢‘ç­‰å¤šç§èµ„æºç±»å‹ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„å­¦ä¹ ä¸æ•™å­¦éœ€æ±‚ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

-   **å…¨é¢è§£æ**ï¼šæ”¯æŒåŒæ­¥è¯¾å ‚ã€ç²¾å“è¯¾ç¨‹ã€ç”µå­æ•™æç­‰å¤šç§èµ„æºç±»å‹ã€‚
-   **é«˜æ•ˆä¸‹è½½**ï¼š
    -   ğŸš€ **å¹¶å‘ä¸‹è½½**ï¼šæ”¯æŒå¤šæ–‡ä»¶åŒæ—¶ä¸‹è½½ï¼Œå……åˆ†åˆ©ç”¨ç½‘ç»œå¸¦å®½ã€‚
    -   ğŸ”„ **æ–­ç‚¹ç»­ä¼ **ï¼šç½‘ç»œå¼‚å¸¸ä¸­æ–­åï¼Œå¯è‡ªåŠ¨æ¢å¤ä¸‹è½½è¿›åº¦ã€‚
    -   âœ… **å®Œæ•´æ€§æ ¡éªŒ**ï¼šé€šè¿‡ MD5 å’Œæ–‡ä»¶å¤§å°æ ¡éªŒï¼Œç¡®ä¿ä¸‹è½½å†…å®¹å®Œæ•´æ— è¯¯ã€‚
-   **è§†é¢‘ä¸“é¡¹ä¼˜åŒ–**ï¼š
    -   ğŸ¬ **M3U8 æ”¯æŒ**ï¼šè‡ªåŠ¨è§£æå¹¶åˆå¹¶åŠ å¯†è§†é¢‘æµï¼Œè¾“å‡ºä¸ºå¯åœ¨ä¸»æµæ’­æ”¾å™¨ä¸­ç›´æ¥æ’­æ”¾çš„å®Œæ•´ `.ts` è§†é¢‘æ–‡ä»¶ã€‚
    -   ğŸ“º **å¤šæ¸…æ™°åº¦**ï¼šæ”¯æŒé€‰æ‹© 1080pã€720p ç­‰ä¸åŒç”»è´¨ã€‚
-   **ä½¿ç”¨ä¾¿æ·**ï¼š
    -   ğŸŒ³ **è‡ªåŠ¨å½’ç±»**ï¼šæŒ‰å­¦ç§‘ã€å¹´çº§ã€ç‰ˆæœ¬ç­‰è‡ªåŠ¨ç”Ÿæˆæ¸…æ™°çš„æ–‡ä»¶ç›®å½•ã€‚
    -   âœï¸ **è§„èŒƒå‘½å**ï¼šè‡ªåŠ¨è¿‡æ»¤éæ³•å­—ç¬¦ï¼Œç”Ÿæˆæ•´æ´å¯è¯»çš„æ–‡ä»¶åã€‚
    -   ğŸ¨ **å‹å¥½ç•Œé¢**ï¼šå½©è‰²è¿›åº¦æç¤ºä¸çŠ¶æ€åé¦ˆï¼Œæ“ä½œè¿‡ç¨‹ä¸€ç›®äº†ç„¶ã€‚
-   **å¤šæ¨¡å¼æ“ä½œ**ï¼š
    -   **äº¤äº’æ¨¡å¼**ï¼šé€‚åˆé€æ¡è¾“å…¥é“¾æ¥æˆ– IDï¼Œæ“ä½œç®€å•ç›´è§‚ã€‚
    -   **æ‰¹é‡æ¨¡å¼**ï¼šæ”¯æŒä»æ–‡ä»¶è¯»å–å¤šä¸ªé“¾æ¥ï¼Œä¸€æ¬¡æ€§å®Œæˆä¸‹è½½ä»»åŠ¡ã€‚
    -   **å‘½ä»¤è¡Œæ¨¡å¼**ï¼šæ”¯æŒç›´æ¥ä¼ å…¥å‚æ•°ï¼Œä¾¿äºé›†æˆæˆ–è„šæœ¬è°ƒç”¨ã€‚
-   **è·¨å¹³å°è¿è¡Œ**ï¼šåŸºäº Rust ç¼–å†™ï¼Œæ”¯æŒ Windowsã€macOS å’Œ Linux ç³»ç»Ÿã€‚

## ğŸ“¥ å®‰è£…è¯´æ˜

### æ–¹å¼ä¸€ï¼šä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼ˆæ¨èï¼‰

è®¿é—® [GitHub Releases](https://github.com/lss53/sed-dl/releases) é¡µé¢ï¼Œä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè§£å‹åå³å¯ä½¿ç”¨ï¼Œæ— éœ€é…ç½®é¢å¤–ç¯å¢ƒã€‚

### æ–¹å¼äºŒï¼šä»æºç æ„å»º

å¦‚æœæ‚¨æœªå®‰è£… Rust ç¯å¢ƒï¼Œè¯·å…ˆè®¿é—® [rustup.rs](https://rustup.rs/) å®‰è£… Rust å·¥å…·é“¾ã€‚

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/lss53/sed-dl.git
cd sed-dl

# ç¼–è¯‘å‘å¸ƒç‰ˆæœ¬
cargo build --release

# ç¼–è¯‘ç»“æœä½äº ./target/release/sed-dl
```

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. è·å– Access Token

ä½¿ç”¨ `sed-dl` å‰éœ€è·å–æœ‰æ•ˆçš„ `Access Token`ï¼Œç”¨äºèº«ä»½éªŒè¯ã€‚

#### è·å–æ–¹å¼ï¼š

> **1. ç™»å½•å¹³å°**ï¼šä½¿ç”¨ Chrome/Edge/Firefox è®¿é—®å¹¶ç™»å½• [å›½å®¶ä¸­å°å­¦æ™ºæ…§æ•™è‚²å¹³å°](https://auth.smartedu.cn/uias/login)ã€‚
>
> **2. æ‰“å¼€å¼€å‘è€…å·¥å…·**ï¼š
>    -   Windows/Linuxï¼šæŒ‰ `F12` æˆ– `Ctrl+Shift+I`
>    -   macOSï¼šæŒ‰ `Cmd+Opt+I` (âŒ˜âŒ¥I)
>
> **3. è¿›å…¥â€œæ§åˆ¶å°â€ (Console)** æ ‡ç­¾é¡µã€‚
>
> **4. ç²˜è´´å¹¶æ‰§è¡Œä»¥ä¸‹è„šæœ¬**ï¼š
> ```javascript
> copy(JSON.parse(JSON.parse(localStorage.getItem(Object.keys(localStorage).find(i => i.startsWith("ND_UC_AUTH")))).value).access_token)
> ```
> **5. Token å°†è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿**ï¼Œç²˜è´´åˆ°å·¥å…·ä¸­å³å¯ã€‚ç¨‹åºä¼šä¼˜å…ˆä½¿ç”¨å‘½ä»¤è¡Œä¼ å…¥çš„ `--token` å‚æ•°ï¼Œå…¶æ¬¡æ˜¯ç¯å¢ƒå˜é‡ï¼Œæœ€åæ‰æ˜¯è‡ªåŠ¨ä¿å­˜çš„ Tokenã€‚é¦–æ¬¡ä½¿ç”¨åï¼Œç¨‹åºä¼šè‡ªåŠ¨ä¿å­˜ Tokenï¼Œåç»­æ— éœ€é‡å¤è¾“å…¥ã€‚

#### æ‰‹åŠ¨è·å–ï¼ˆå¤‡é€‰ï¼‰ï¼š

![ä»¤ç‰Œæˆªå›¾](.github/assets/token.png)

### 2. ä½¿ç”¨ç¤ºä¾‹

#### äº¤äº’æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ï¼‰

ä½¿ç”¨ `-i` å‚æ•°å¯åŠ¨äº¤äº’æ¨¡å¼ï¼ŒæŒ‰æç¤ºè¾“å…¥é“¾æ¥æˆ–èµ„æº IDã€‚

```bash
sed-dl -i
```
![äº¤äº’æ¨¡å¼æˆªå›¾](.github/assets/sed-dl-i.png)

#### ä¸‹è½½å•ä¸ªèµ„æº

ä½¿ç”¨ `--url` å‚æ•°ç›´æ¥æŒ‡å®šé“¾æ¥ï¼Œç¨‹åºå°†è‡ªåŠ¨è¯†åˆ«èµ„æºç±»å‹å¹¶ä¸‹è½½ã€‚

```bash
# ä¸‹è½½åŒæ­¥è¯¾å ‚çš„è§†é¢‘ä¸è¯¾ä»¶
sed-dl --url "https://www.zxx.edu.cn/syncClassroom/classActivity?activityId=******"

# ä¸‹è½½ç”µå­æ•™æåŠéŸ³é¢‘
sed-dl --url "https://www.zxx.edu.cn/tchMaterial?contentId=******"
```

#### æ‰¹é‡ä¸‹è½½

å°†å¤šä¸ªé“¾æ¥æˆ– ID å­˜å…¥æ–‡æœ¬æ–‡ä»¶ï¼ˆå¦‚ `links.txt`ï¼‰ï¼Œæ¯è¡Œä¸€ä¸ªã€‚

**ç¤ºä¾‹ `links.txt` æ–‡ä»¶ï¼š**
```
https://.../classActivity?activityId=...
https://.../tchMaterial?contentId=...
a1b2c3d4-....-....-....-e5f6g7h8i9j0
```

ä½¿ç”¨ `-b` æˆ– `--batch-file` æŒ‡å®šæ–‡ä»¶è·¯å¾„ã€‚**è‹¥æ–‡ä»¶ä¸­åŒ…å«èµ„æº IDï¼Œå¿…é¡»ä½¿ç”¨ `--type` æŒ‡å®šç±»å‹ã€‚**

```bash
sed-dl -b links.txt --type "syncClassroom/classActivity" -o "D:\è¯¾ç¨‹èµ„æ–™"
```
å¯ç”¨ `--type` é€‰é¡¹åŒ…æ‹¬ï¼š`tchMaterial`ã€`qualityCourse`ã€`syncClassroom/classActivity`ã€‚

#### æŸ¥çœ‹å®Œæ•´å¸®åŠ©

```bash
sed-dl --help
```

## âš ï¸ æ³¨æ„äº‹é¡¹

-   è¯·åˆç†ä½¿ç”¨æœ¬å·¥å…·ï¼Œå°Šé‡å¹³å°ç‰ˆæƒï¼Œä¸‹è½½èµ„æºä»…é™ä¸ªäººå­¦ä¹ ä¸ç ”ç©¶ã€‚
-   `Access Token` å…·æœ‰æœ‰æ•ˆæœŸï¼Œå¦‚é‡ 401/403 ç­‰è®¤è¯é”™è¯¯ï¼Œè¯·é‡æ–°è·å–ã€‚
-   æœ¬å·¥å…·ä¸ºå¼€æºé¡¹ç›®ï¼Œä½œè€…ä¸å¯¹å› ä½¿ç”¨æœ¬å·¥å…·å¼•å‘çš„ä»»ä½•é—®é¢˜è´Ÿè´£ã€‚

## ğŸ¤ å‚ä¸è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜åé¦ˆã€åŠŸèƒ½å»ºè®®æˆ–ä»£ç æ”¹è¿›ï¼

-   **æŠ¥å‘Šé—®é¢˜**ï¼šè¯·åœ¨ [GitHub Issues](https://github.com/lss53/sed-dl/issues) æäº¤ Bug æˆ–å»ºè®®ã€‚
-   **ä»£ç è´¡çŒ®**ï¼šæ¬¢è¿ Fork é¡¹ç›®å¹¶æäº¤ Pull Requestï¼Œä»£ç æ ¼å¼è¯·éµå¾ª `rustfmt` è§„èŒƒã€‚

## ğŸ“š å¼€æºè‡´è°¢

æœ¬é¡¹ç›®ä½¿ç”¨äº†ä»¥ä¸‹ä¼˜ç§€å¼€æºé¡¹ç›®çš„æ€è·¯æˆ–ä»£ç ï¼š

-   [smartedu-download](https://github.com/52beijixing/smartedu-download)
-   [smartedu-dl-go](https://github.com/hantang/smartedu-dl-go)
-   [smartedu-dl-py](https://github.com/changsongyang/smartedu-dl-py)
-   [tchMaterial-parser](https://github.com/happycola233/tchMaterial-parser)
-   [FlyEduDownloader](https://github.com/cjhdevact/FlyEduDownloader)

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚

---

**å…è´£å£°æ˜**ï¼šæœ¬å·¥å…·ä»…ä¸ºä¸ªäººå­¦ä¹ ä¸æŠ€æœ¯ç ”ç©¶è€Œå¼€å‘ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”ã€‚æ‰€æœ‰èµ„æºçš„ç‰ˆæƒå½’å›½å®¶ä¸­å°å­¦æ™ºæ…§æ•™è‚²å¹³å°åŠç›¸å…³æƒåˆ©æ–¹æ‰€æœ‰ã€‚